<?xml version="1.0" encoding="utf-8"?>
<!--
    AccessibilityService Configuration for BreakLoop
    
    This configuration defines how the ForegroundDetectionService operates
    and what the user sees in Android Accessibility Settings.
    
    PRIVACY & TRANSPARENCY:
    - User must explicitly enable this service in Settings > Accessibility
    - Android shows a clear warning about granting accessibility permissions
    - The description below explains exactly what the service does
    - Users can disable the service at any time
    
    CAPABILITIES:
    - accessibilityEventTypes: Window state changes + user interactions
      * typeWindowStateChanged: Detect when apps are opened/switched
      * typeViewScrolled: Detect scrolling (for Quick Task enforcement)
      * typeViewClicked: Detect taps (for Quick Task enforcement)
      * typeWindowContentChanged: Detect content updates (for Quick Task enforcement)
      We do NOT monitor any content or text - only detect that interaction occurred
    
    - accessibilityFlags: 
      * flagReportViewIds: Required for interaction events
      * flagIncludeNotImportantViews: CRITICAL - without this, scroll events
        from Instagram/TikTok/YouTube will NOT be delivered by Android
    
    - canRetrieveWindowContent: false
      Explicitly disabled - we cannot read any UI content from other apps
    
    QUICK TASK ENFORCEMENT:
    - Interaction events are used to enforce Quick Task expiration
    - When Quick Task timer expires, the next user interaction triggers intervention
    - This ensures enforcement works during continuous app usage (scrolling, video, etc.)
-->
<accessibility-service
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:accessibilityEventTypes="typeWindowStateChanged|typeViewScrolled|typeViewClicked|typeWindowContentChanged"
    android:accessibilityFeedbackType="feedbackGeneric"
    android:accessibilityFlags="flagReportViewIds|flagIncludeNotImportantViews"
    android:canRetrieveWindowContent="false"
    android:description="@string/accessibility_service_description"
    android:notificationTimeout="0"
    android:packageNames=""
    android:settingsActivity="com.anonymous.breakloopnative.MainActivity" />

